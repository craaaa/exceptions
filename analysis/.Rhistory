mutate(num_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
ggplot(aes(x=category, y=num_basic, fill = (type))) +
geom_col(position=position_dodge()) +
facet_wrap(vars(matches_preamble), labeller= as_labeller(c(`FALSE` = "Non-Expert", `TRUE` = "Expert"))) +
labs(x="Category", y="Number of basic responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom",) +
guides(fill = guide_legend(nrow = 2)) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#007FFF", "#17B169", "#d783f7"))
data_exp4 %>% mutate(model = "LLaVA", min_basic = error_1, max_basic=error_2) %>%
select(!c(error_1, error_2)) %>%
rbind(summary_exp1 %>% mutate(model="GPT-4V")) %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Expert In Another Field")),
levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
group_by(trial_type, category, model) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic,
model = "LLaVA")) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic,
model = "GPT-4V")) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge) +
facet_wrap(vars(model)) +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="System Prompt Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
data_exp4 <- list.files(path = here("results", "llava_verbose"), pattern = "\\.csv$") %>%
set_names() %>%
map_dfr(~read_delim(here("results", "llava_verbose", .), delim = "\t"), .id = "filename") %>%
rowwise() %>%
mutate(preamble_type=rsplit(filename, "_", 3)[1],
prompt_type=rsplit(filename, "_", 3)[2],
category = tools::toTitleCase(category),
)
data_exp4 <- data_exp4 %>%
mutate(is_default = (preamble_type %in% default_preambles),
matches_preamble =
(preamble_type %in% bird_preambles & category == "Bird") |
(preamble_type %in% dog_preambles  & category == "Dog") |
(preamble_type %in% flower_preambles & category == "Flower") |
(preamble_type %in% tree_preambles & category == "Tree")
)
data_exp4 <- data_exp4 %>%
mutate(is_default = (preamble_type %in% default_preambles),
matches_preamble =
(preamble_type %in% bird_preambles & category == "Bird") |
(preamble_type %in% dog_preambles  & category == "Dog") |
(preamble_type %in% flower_preambles & category == "Flower") |
(preamble_type %in% tree_preambles & category == "Tree")
)
```{r}
data_exp4 <- data_exp4 %>%
group_by(category, preamble_type, matches_preamble, is_default) %>%
summarise(n=n(),
num_basic = n - sum(prefer_first)) %>%
rowwise() %>%
mutate(error = list(bayesian_error(num_basic, n))) %>%
unnest_wider(error, names_sep="_") %>%
ungroup()
data_exp4 <- data_exp4 %>%
group_by(category, preamble_type, matches_preamble, is_default) %>%
summarise(n=n(),
num_basic = n - sum(prefer_first)) %>%
rowwise() %>%
mutate(error = list(bayesian_error(num_basic, n))) %>%
unnest_wider(error, names_sep="_") %>%
ungroup()
```{r}
dodge <- position_dodge(width=0.9)
default_data_exp4 <- data_exp4 %>%
filter(is_default) %>%
filter(preamble_type != "llava") %>%
group_by(category, preamble_type) %>%
summarise(num_basic = sum(num_basic)/sum(n),
min_basic = sum(error_1)/sum(n),
max_basic = sum(error_2)/sum(n)) %>%
rbind(human_results) %>%
mutate(model = "LLaVA") %>%
mutate(preamble_type = factor(preamble_type,
levels=c("default", "information", "novice", "novice_explicit", "llava", "human"),
labels=c("Default 1", "Default 2", "Default 3", "Default 4", "Default 5", "Human")))
default_data_exp4 %>%
rbind(default_data_exp1) %>%
ggplot(aes(x=category, y=num_basic, fill=preamble_type)) +
geom_col(position=dodge) +
labs(x="Image Category", y="Percentage of Basic Responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom") +
facet_wrap(vars(model)) +
guides(fill = guide_legend(nrow = 2)) +
#facet_wrap(vars(factor(prompt_type, levels=c("fastest", "twowords"), labels=c("Fastest", "Two words")))) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#3B9AB2", "#78B7C5", "#EBCC2A", "#E1AF00", "#000000"))
default_data_exp4 %>%
rbind(default_data_exp1) %>%
ggplot(aes(x=category, y=num_basic, fill=preamble_type)) +
geom_col(position=dodge) +
labs(x="Image Category", y="Percentage of Basic Responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom") +
facet_wrap(vars(model)) +
guides(fill = guide_legend(nrow = 1)) +
#facet_wrap(vars(factor(prompt_type, levels=c("fastest", "twowords"), labels=c("Fastest", "Two words")))) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#3B9AB2", "#78B7C5", "#EBCC2A", "#E1AF00", "#000000"))
ggsave(filename=here("analysis", "default_models.pdf"), device="pdf", width=6, height=4, units="in")
ggsave(filename=here("analysis", "default_models.pdf"), device="pdf", width=360, height=160, units="mm")
default_expert_baseline_exp4 <- data_exp4 %>%
filter(is_default) %>%
mutate(matches_preamble = TRUE)
data_exp4 %>%
rbind(default_expert_baseline_exp4) %>%
group_by(category, preamble_type, is_default, matches_preamble) %>%
mutate(nonexpert_mentioned = preamble_type %in% nonexpert_mentioned,
expert_not_mentioned = preamble_type %in% expert_not_mentioned,
type = factor(ifelse(is_default, "Default",ifelse(nonexpert_mentioned, "Image Category Mentioned", "Image Category Not Mentioned")),
levels=c("Default", "Image Category Mentioned","Image Category Not Mentioned")))%>%
group_by(type, category, matches_preamble) %>%
summarise(num_basic = sum(num_basic)/sum(n),
min_basic = sum(error_1)/sum(n),
max_basic = sum(error_2)/sum(n)) %>%
ggplot(aes(x=category, y=num_basic, fill = (type))) +
geom_col(position=position_dodge()) +
facet_wrap(vars(matches_preamble), labeller= as_labeller(c(`FALSE` = "Non-Expert", `TRUE` = "Expert"))) +
labs(x="Category", y="Number of basic responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom",) +
guides(fill = guide_legend(nrow = 2)) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#007FFF", "#17B169", "#d783f7"))
data_exp4 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = error_1/n,
max_basic = error_2/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="Persona Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
data_exp5 <- list.files(path = here("results", "llava_truefalse"), pattern = "\\.csv$") %>%
set_names() %>%
map_dfr(~read_delim(here("results", "llava_truefalse", .), delim = "\t", show_col_types = FALSE), .id = "filename") %>%
rowwise() %>%
filter(rsplit(filename, "_", 4)[4] != "alt2.csv") %>%
mutate(ground_truth=rsplit(filename, "_", 4)[4] == "true.csv",
prompt_type=rsplit(filename, "_", 4)[2],
category = tools::toTitleCase(category),
)
data_exp4 %>% mutate(model = "LLaVA", min_basic = error_1, max_basic=error_2) %>%
select(!c(error_1, error_2)) %>%
rbind(summary_exp1 %>% mutate(model="GPT-4V")) %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Expert In Another Field")),
levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
group_by(trial_type, category, model) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic,
model = "LLaVA")) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Expert In Another Field", "Expert", "Human")),
pct_basic = num_basic,
model = "GPT-4V")) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge) +
facet_wrap(vars(model)) +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="System Prompt Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
ggsave(filename=here("analysis", "results_simplified.pdf"), device="pdf", width=360, height=160, units="mm")
data_exp4 %>%
rbind(default_expert_baseline_exp4) %>%
group_by(category, preamble_type, is_default, matches_preamble) %>%
mutate(nonexpert_mentioned = preamble_type %in% nonexpert_mentioned,
expert_not_mentioned = preamble_type %in% expert_not_mentioned,
type = factor(ifelse(is_default, "Default",ifelse(nonexpert_mentioned, "Image Category Mentioned", "Image Category Not Mentioned")),
levels=c("Default", "Image Category Mentioned","Image Category Not Mentioned")))%>%
group_by(type, category, matches_preamble) %>%
summarise(num_basic = sum(num_basic)/sum(n),
min_basic = sum(error_1)/sum(n),
max_basic = sum(error_2)/sum(n)) %>%
ggplot(aes(x=category, y=num_basic, fill = (type))) +
geom_col(position=position_dodge()) +
facet_wrap(vars(matches_preamble), labeller= as_labeller(c(`FALSE` = "Non-Expert", `TRUE` = "Expert"))) +
labs(x="Category", y="Number of basic responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom",) +
guides(fill = guide_legend(nrow = 2)) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#007FFF", "#17B169", "#d783f7"))
data_exp4 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = error_1/n,
max_basic = error_2/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="Persona Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
data_exp4 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = error_1/n,
max_basic = error_2/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="Persona Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
summary_exp1 %>%
mutate(matches_preamble = ifelse(matches_preamble, "Expert", "Expert In Another Field")) %>%
mutate(matches_preamble = factor(matches_preamble,
levels=c("Default", "Expert In Another Field", "Expert"))) %>%
rbind(default_expert_baseline_exp1 %>% mutate(type="Default", matches_preamble="Default")) %>%
mutate(nonexpert_mentioned = preamble_type %in% nonexpert_mentioned,
expert_not_mentioned = preamble_type %in% expert_not_mentioned,
type = factor(ifelse(nonexpert_mentioned, "Image Category Mentioned", "Image Category Not Mentioned"),
levels=c("Default", "Image Category Mentioned","Image Category Not Mentioned")))%>%
group_by(type, category, matches_preamble) %>%
summarise(num_basic = sum(num_basic),
min_basic = sum(min_basic),
max_basic = sum(max_basic),
n = sum(n)) %>%
mutate(num_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
ggplot(aes(x=category, y=num_basic, fill = (matches_preamble))) +
geom_col(position=position_dodge()) +
facet_wrap(vars(type)) +
labs(x="Category", y="Number of basic responses", fill="System Prompt Type") +
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
theme(legend.position = "bottom") +
guides(fill = guide_legend(nrow = 1)) +
scale_y_continuous(limits=c(0,1), labels = scales::percent) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
ggsave(filename=here("analysis", "preamble_type.pdf"), device="pdf", width=360, height=60, units="mm")
ggsave(filename=here("analysis", "preamble_type.pdf"), device="pdf", width=360, height=160, units="mm")
summary_exp2 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert")),
pct_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="System Prompt Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63"))
data_exp2 <- list.files(path = here("results", "gpt_catdog"), pattern = "\\.csv$") %>%
map_df(~read_csv(here("results", "gpt_catdog", .)))
test_that("all responses are coded as either basic or subordinate", {
exceptions <- data_exp2 %>%
group_by(stimulus, preamble_type) %>%
summarise(num_basic = sum(is_basic),
num_subordinate = sum(is_subordinate)) %>%
filter((num_basic + num_subordinate) != 10) # n = 10
exceptions
expect_equal(nrow(exceptions), 0)
})
test_that("all responses are coded as either basic or subordinate", {
exceptions <- data_exp2 %>%
group_by(stimulus, preamble_type) %>%
summarise(num_basic = sum(is_basic),
num_subordinate = sum(is_subordinate)) %>%
filter((num_basic + num_subordinate) != 10) # n = 10
exceptions
expect_equal(nrow(exceptions), 0)
})
```{r}
data_exp2 <- data_exp2 %>%
mutate(is_default = preamble_type %in% default_preambles,
matches_preamble = (preamble_type %in% dog_preambles & category == "dog") |
(preamble_type %in% c("catexpert") & category == "cat"))
summary_exp2 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert")),
pct_basic = num_basic/n,
min_basic = min_basic/n,
max_basic = max_basic/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="System Prompt Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63"))
data_exp4 %>%
mutate(trial_type = factor(ifelse(is_default, "Default", ifelse(matches_preamble, "Expert", "Non-Expert")),
levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic/n,
min_basic = error_1/n,
max_basic = error_2/n) %>%
group_by(trial_type, category) %>%
summarise(pct_basic = mean(pct_basic),
min_basic = mean(min_basic),
max_basic = mean(max_basic)) %>%
rbind(human_results %>%
mutate(trial_type = factor("Human", levels=c("Default", "Non-Expert", "Expert", "Human")),
pct_basic = num_basic)) %>%
ggplot(aes(x=category, y=pct_basic, fill=trial_type)) +
geom_col(position=dodge)+
geom_errorbar(aes(ymin = min_basic, ymax = max_basic), width=0.2, position = dodge) +
labs(x="Image Category",
y="Percentage of Basic Responses",
fill="Persona Type") +
theme(legend.position = "bottom") +
scale_y_continuous(breaks = brks, limits=c(0,1), labels = scales::percent(brks)) +
scale_fill_manual(values = c("#007FFF", "#0047AB", "#fd5c63", "#000000"))
knitr::opts_chunk$set(echo = TRUE)
```{r}
knitr::opts_chunk$set(echo = TRUE)
here::i_am("analysis/bigram.Rmd")
library(here)
library(dplyr)
library(readr)
library(ggplot2)
library(stringr)
library(tidyr)
library(ggrepel)
library(gghalves)
library(colorBlindness)
library(showtext)
font_add("fira", "FiraSans-Regular.ttf")
font_add("firal", "FiraSans-Light.ttf")
theme_set(theme_light() + theme(text=element_text(size=14,  family="fira")))
knitr::opts_chunk$set(echo = TRUE)
here::i_am("analysis/bigram.Rmd")
library(here)
library(dplyr)
library(readr)
library(ggplot2)
library(stringr)
library(tidyr)
library(ggrepel)
library(gghalves)
library(colorBlindness)
library(showtext)
font_add("fira", "FiraSans-Regular.ttf")
font_add("firal", "FiraSans-Light.ttf")
theme_set(theme_light() + theme(text=element_text(size=14,  family="fira")))
knitr::opts_chunk$set(echo = TRUE)
here::i_am("analysis/bigram.Rmd")
library(here)
library(dplyr)
library(readr)
library(ggplot2)
library(stringr)
library(tidyr)
library(ggrepel)
library(gghalves)
library(colorBlindness)
library(showtext)
font_add("fira", "FiraSans-Regular.ttf")
font_add("firal", "FiraSans-Light.ttf")
theme_set(theme_light() + theme(text=element_text(size=14,  family="fira")))
bigram <- read_csv(here("scores", "trigram.csv"))
mean_bigram <- bigram %>%
group_by(verb, verb_class) %>%
summarize(
result = Hmisc::smean.cl.boot(pass_drop) %>% t() %>% as.data.frame()
) %>%
unnest(result)
human_bigram_comparison <- mean_human_by_verb %>%
left_join(mean_bigram, by = c("verb")) %>%
mutate(verb_class = ifelse(verb_class == "Agent-patient", "Agent-Patient", verb_class)) %>%
mutate(verb_class = ifelse(verb_class == "Experiencer-theme", "Experiencer-Theme", verb_class))
human_bigram_comparison %>%
ggplot(aes(x = human_mean, y = Mean, xmin = human_error_1, xmax = human_error_2, ymin = Lower, ymax = Upper)) +
geom_point(aes(color = verb_class)) +
geom_smooth(aes(alpha=0.8), method="lm") +
geom_errorbar(aes(color=verb_class, alpha=0.8)) +
geom_errorbarh(aes(color=verb_class, alpha=0.8)) +
xlab("Mean human passive drop") +
ylab("Mean trigram model passive drop") +
geom_text_repel(aes(label=verb), min.segment.length = 0, size=3.5, max.overlaps= Inf, segment.linetype = 2, family='firal', nudge_x = 1, nudge_y = 0.4) +
theme(legend.position="bottom", legend.title = element_blank()) +
scale_color_manual(values=verb_class_colours) +
#   scale_x_continuous(limits = c(-12, 100), breaks=seq(0, 80, by = 20)) +
#   scale_y_continuous(limits=c(-3,9), breaks=seq(0,8, by=2)) +
guides(alpha="none", colour = guide_legend(nrow = 1))
showtext_auto()
bigram <- read_csv(here("scores", "trigram.csv"))
mean_bigram <- bigram %>%
group_by(verb, verb_class) %>%
summarize(
result = Hmisc::smean.cl.boot(pass_drop) %>% t() %>% as.data.frame()
) %>%
unnest(result)
human_bigram_comparison <- mean_human_by_verb %>%
left_join(mean_bigram, by = c("verb")) %>%
mutate(verb_class = ifelse(verb_class == "Agent-patient", "Agent-Patient", verb_class)) %>%
mutate(verb_class = ifelse(verb_class == "Experiencer-theme", "Experiencer-Theme", verb_class))
human_bigram_comparison %>%
ggplot(aes(x = human_mean, y = Mean, xmin = human_error_1, xmax = human_error_2, ymin = Lower, ymax = Upper)) +
geom_point(aes(color = verb_class)) +
geom_smooth(aes(alpha=0.8), method="lm") +
geom_errorbar(aes(color=verb_class, alpha=0.8)) +
geom_errorbarh(aes(color=verb_class, alpha=0.8)) +
xlab("Mean human passive drop") +
ylab("Mean trigram model passive drop") +
geom_text_repel(aes(label=verb), min.segment.length = 0, size=3.5, max.overlaps= Inf, segment.linetype = 2, family='firal', nudge_x = 1, nudge_y = 0.4) +
theme(legend.position="bottom", legend.title = element_blank()) +
scale_color_manual(values=verb_class_colours) +
#   scale_x_continuous(limits = c(-12, 100), breaks=seq(0, 80, by = 20)) +
#   scale_y_continuous(limits=c(-3,9), breaks=seq(0,8, by=2)) +
guides(alpha="none", colour = guide_legend(nrow = 1))
human_bigram_comparison %>%
select(human_mean, Mean) %>% cor()
bigram %>%
mutate(acc = pass_drop > 0) %>%
group_by(verb, verb_class) %>%
summarise(acc = sum(acc) / 5) %>%
ggplot(aes(x = verb, y = acc)) +
geom_bar(stat = "identity") +
facet_wrap(vars(verb_class), scales="free_x")
bigram %>%
mutate(acc = pass_drop > 0) %>%
summarise(sum(acc)/n())
ggsave(here("analysis", "trigram_correlation.pdf"), device="pdf", width=9, height=4, units = "in")
human_bigram_comparison %>%
ggplot(aes(x = human_mean, y = Mean, xmin = human_error_1, xmax = human_error_2, ymin = Lower, ymax = Upper)) +
geom_point(aes(color = verb_class)) +
geom_smooth(aes(alpha=0.8), method="lm") +
geom_errorbar(aes(color=verb_class, alpha=0.8)) +
geom_errorbarh(aes(color=verb_class, alpha=0.8)) +
xlab("Mean human passive drop") +
ylab("Mean trigram model passive drop") +
geom_text_repel(aes(label=verb), min.segment.length = 0, size=3.5, max.overlaps= Inf, segment.linetype = 2, family='firal', nudge_x = 1, nudge_y = 0.4) +
theme(legend.position="bottom", legend.title = element_blank()) +
scale_color_manual(values=verb_class_colours) +
#   scale_x_continuous(limits = c(-12, 100), breaks=seq(0, 80, by = 20)) +
#   scale_y_continuous(limits=c(-3,9), breaks=seq(0,8, by=2)) +
guides(alpha="none", colour = guide_legend(nrow = 1))
ggsave(here("analysis", "trigram_correlation.pdf"), device="pdf", width=9, height=4, units = "in")
ggsave(here("analysis", "trigram_correlation.pdf"), device="pdf", width=9, height=6, units = "in")
